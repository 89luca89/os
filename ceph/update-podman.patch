From 60d3f1c1f34b219d951d92d9dad7c07d8a3efc25 Mon Sep 17 00:00:00 2001
From: uti <uti.edun@chainguard.dev>
Date: Thu, 14 Aug 2025 13:25:05 +0000
Subject: [PATCH] fix: update Podman version retrieval to use correct command
 format

---
 src/cephadm/cephadmlib/container_engines.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/src/cephadm/cephadmlib/container_engines.py b/src/cephadm/cephadmlib/container_engines.py
index 64ce7ae821a..e56d9c30e9b 100644
--- a/src/cephadm/cephadmlib/container_engines.py
+++ b/src/cephadm/cephadmlib/container_engines.py
@@ -32,9 +32,12 @@ class Podman(ContainerEngine):
     def get_version(self, ctx: CephadmContext) -> None:
         out, _, _ = call_throws(
             ctx,
-            [self.path, 'version', '--format', '{{.Client.Version}}'],
+            [self.path, '--version'],
             verbosity=CallVerbosity.QUIET,
         )
+        # Parse "podman version X.Y.Z" format
+        if out.startswith('podman version '):
+            out = out.split(' ')[2].strip()
         self._version = _parse_podman_version(out)
 
     def __str__(self) -> str:
-- 
2.50.1

